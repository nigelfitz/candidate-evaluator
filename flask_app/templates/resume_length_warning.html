{% extends "base.html" %}

{% block content %}
<div class="container mt-5">
    <div style="max-width: 800px; margin: 0 auto;">
        <!-- Warning Banner -->
        <div
            style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); border-radius: 12px; padding: 32px; margin-bottom: 30px; border: 2px solid #3b82f6; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);">
            <div style="display: flex; gap: 20px;">
                <i data-lucide="info" style="width: 56px; height: 56px; color: #1e40af; flex-shrink: 0;"></i>
                <div style="flex: 1;">
                    <h2 style="color: #1e40af; margin: 0 0 16px 0; font-size: 22px; font-weight: 700;">
                        ðŸ“„ Resume Length Notice
                    </h2>
                    <p style="color: #1e40af; margin: 0 0 16px 0; font-size: 16px; line-height: 1.6;">
                        The following resume(s) exceed our recommended limit of <strong>{{ "{:,}".format(resume_limit)
                            }} characters</strong>:
                    </p>

                    <ul style="color: #1e40af; margin: 0 0 16px 0; padding-left: 20px; font-size: 14px;">
                        {% for resume in truncated_resumes %}
                        <li style="margin-bottom: 8px;">
                            <strong>{{ resume.name }}</strong>: {{ "{:,}".format(resume.length) }} characters
                            <span style="color: #3b82f6;">â†’ will use first {{ "{:,}".format(resume_limit) }}</span>
                        </li>
                        {% endfor %}
                    </ul>

                    <!-- Don't Worry Section -->
                    <div
                        style="background: white; border-radius: 8px; padding: 16px; border-left: 4px solid #16a34a; margin-bottom: 16px;">
                        <p style="color: #065f46; margin: 0 0 12px 0; font-size: 15px; font-weight: 600;">
                            âœ… Don't worry - you're in good hands!
                        </p>
                        <p style="color: #047857; margin: 0; font-size: 14px; line-height: 1.6;">
                            Our generous {{ "{:,}".format(resume_limit) }}-character limit is designed to capture all
                            essential information while maintaining optimal AI performance. The analysis will still be
                            comprehensive and accurate.
                        </p>
                    </div>

                    <!-- What Happens Section -->
                    <div
                        style="background: #eff6ff; border-radius: 8px; padding: 16px; border-left: 4px solid #3b82f6; margin-bottom: 16px;">
                        <p style="color: #1e40af; margin: 0 0 8px 0; font-size: 14px; font-weight: 600;">
                            ðŸ“‹ What will happen:
                        </p>
                        <ul style="color: #1e40af; margin: 0; padding-left: 20px; font-size: 14px; line-height: 1.6;">
                            <li>We'll use the first {{ "{:,}".format(resume_limit) }} characters of each resume</li>
                            <li>All key experience, skills, and qualifications will still be evaluated</li>
                            <li>You can proceed to run the analysis or upload shorter versions</li>
                        </ul>
                    </div>

                    <!-- Action Buttons -->
                    <div style="margin-top: 24px;">
                        <form method="POST" action="{{ url_for('analyze') }}">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                            <input type="hidden" name="action" value="confirm_resume_length">
                            <button type="submit"
                                style="width: 100%; padding: 14px 24px; background: linear-gradient(135deg, #16a34a 0%, #15803d 100%); color: white; border: none; border-radius: 8px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3); transition: transform 0.2s;"
                                onmouseover="this.style.transform='translateY(-2px)'"
                                onmouseout="this.style.transform='translateY(0)'">
                                âœ… Continue to Run Analysis
                            </button>
                        </form>
                    </div>

                    <!-- Abandon Job Button -->
                    <div
                        style="margin-top: 16px; text-align: center; padding-top: 16px; border-top: 1px solid #bfdbfe;">
                        <a href="{{ url_for('analyze', new='1') }}"
                            style="display: inline-block; padding: 8px 16px; background: transparent; border: 1px solid #cbd5e1; border-radius: 6px; color: #64748b; font-size: 13px; font-weight: 500; text-decoration: none; transition: all 0.2s;"
                            onmouseover="this.style.borderColor='#94a3b8'; this.style.color='#475569'"
                            onmouseout="this.style.borderColor='#cbd5e1'; this.style.color='#64748b'">
                            ðŸš« Abandon Job & Start Fresh
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Info Box -->
        <div style="background: #f8fafc; border-radius: 8px; padding: 20px; border-left: 4px solid #64748b;">
            <p style="color: #475569; margin: 0; font-size: 14px; line-height: 1.6;">
                <strong>ðŸ’¡ Tip:</strong> No charges have been applied yet. Charges only occur when your analysis
                completes successfully. You're free to abandon or restart at any time before clicking "Run Analysis".
            </p>
        </div>
    </div>
</div>

<script src="https://unpkg.com/lucide@latest"></script>
<script>
    lucide.createIcons();
</script>
{% endblock %}